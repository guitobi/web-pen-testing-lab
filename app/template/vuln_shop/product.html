{% extends "vuln_shop/base.html" %}
{% block title %}{{ product.name }}{% endblock %}
{% block head_extra %}
<style>
    body { background: #f5f7fb; }
    .product-page-wrapper { max-width: 1200px; margin: 20px auto 40px; padding: 0 16px; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    .breadcrumbs { font-size: 13px; color: #666; margin-bottom: 10px; }
    .breadcrumbs a { color: #00c853; text-decoration: none; }
    .breadcrumbs span { margin: 0 4px; }
    .product-card-full { background: #fff; border-radius: 12px; padding: 20px 18px; box-shadow: 0 2px 10px rgba(0,0,0,0.06); }
    .product-top { display: flex; gap: 20px; align-items: flex-start; }
    .product-top img { width: 140px; height: 140px; object-fit: cover; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
    .product-main h1 { margin: 0 0 8px; font-size: 24px; }
    .product-main p { margin: 4px 0; }
    .product-price { margin-top: 10px; font-size: 20px; font-weight: 700; color: #00c853; }
    .reviews-block { margin-top: 28px; border-top: 1px solid #e0e3ef; padding-top: 16px; }
    .review-form { display: flex; flex-direction: column; gap: 10px; background: #f7f9ff; padding: 14px; border-radius: 10px; margin-bottom: 18px; }
    .review-form input, .review-form textarea { width: 100%; padding: 8px 10px; border-radius: 8px; border: 1px solid #d0d4e4; font-size: 14px; }
    .review-form button { align-self: flex-start; border: none; border-radius: 8px; background: #00c853; color: #fff; padding: 9px 16px; font-size: 14px; font-weight: 600; cursor: pointer; }
    .review-item { background: #fff; border-radius: 8px; border: 1px solid #e0e3ef; padding: 10px 12px; margin-bottom: 10px; box-shadow: 0 1px 4px rgba(0,0,0,0.05); }
    .review-item small { color: #777; }
</style>
{% endblock %}
{% block content %}
<div class="product-page-wrapper">
    <div class="breadcrumbs">
        <a href="/">Home</a><span>/</span><span>{{ product.name }}</span>
    </div>

    <section class="product-card-full">
        <div class="product-top">
            <img src="/static/img/523634223.webp" alt="product">
            <div class="product-main">
                <h1>{{ product.name }}</h1>
                <p>{{ product.description }}</p>
                <p class="product-price">? {{ product.price }}</p>
            </div>
        </div>

        <div class="reviews-block">
            <h2>Reviews</h2>
            <form class="review-form" method="post" action="/add_review?id={{ product.id }}">
                <input name="author" placeholder="Your name">
                <textarea name="text" rows="3" placeholder="Your review..."></textarea>
                <button type="submit">Send review</button>
            </form>

            {% for r in reviews %}
            <div class="review-item">
                <b>{{ r.author }}</b><br>
                <small>{{ r.created_at }}</small>
                <div style="margin-top:6px;">{{ r.text|safe }}</div>
            </div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}

